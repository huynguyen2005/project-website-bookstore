extends ../../layouts/default

block main
  form(action=`${prefixAdmin}/accounts/create` method="POST" enctype="multipart/form-data")
    div(class="card")
      div(class="card-header d-flex justify-content-between align-items-center")
        h5(class="mb-0") Thêm tài khoản

      div(class="card-body")
        div(class="tab-content")
          div(class="tab-pane fade show active" id="account-info" role="tabpanel")
            h6(class="mb-3 fw-bold") Thông tin tài khoản

            div(class="form-group row mb-3 align-items-start")
              label(for="email" class="col-sm-2 col-form-label") Email
              div(class="col-sm-10")
                input(id="email" class="form-control" type="email" name="email" required placeholder="Nhập email")
              
            div(class="form-group row mb-3 align-items-start")
              label(for="password" class="col-sm-2 col-form-label") Mật khẩu
              div(class="col-sm-10")
                input(id="password" class="form-control w-100" type="password" name="password" required placeholder="Nhập mật khẩu" onkeyup="check();")

            div(class="form-group row mb-3 align-items-start")
              label(for="confirmPassword" class="col-sm-2 col-form-label") Xác nhận mật khẩu
              div(class="col-sm-10")
                input(id="confirmPassword" class="form-control w-100" type="password" name="confirmPassword" required placeholder="Nhập lại mật khẩu" onkeyup="check();")
                small(id="message" class="d-block mt-1 fw-semibold" style="color:red;")

            div(class="form-group row mb-3 align-items-start")
              label(for="role_id" class="col-sm-2 col-form-label") Nhóm quyền
              div(class="col-sm-10")
                select(id="role_id" class="form-control" name="role_id")
                  option(value="") Lựa chọn
                  each role in roles
                    option(value=role._id) #{role.title}

        .form-group
          label(for="status") Trạng thái
          .d-flex.align-items-center.gap-4
            .form-check.form-check-inline
              input#active.form-check-input(
                type="radio"
                name="status"
                value="active"
                checked=(account ? account.status === "active" : true)
              )
              label.form-check-label(for="active") Hoạt động
            .form-check.form-check-inline
              input#inactive.form-check-input(
                type="radio"
                name="status"
                value="inactive"
                checked=(account ? account.status === "inactive" : false)
              )
              label.form-check-label(for="inactive") Dừng hoạt động

        hr(class="my-4")

        h6(class="mb-3 fw-bold") Thông tin cá nhân

        div(class="form-group row mb-3 align-items-start")
          label(for="fullName" class="col-sm-2 col-form-label") Họ và tên *
          div(class="col-sm-10")
            input(id="fullName" class="form-control" type="text" name="fullName" required placeholder="Nhập họ và tên")

        div(class="form-group row mb-3 align-items-start")
          label(for="phone" class="col-sm-2 col-form-label") Số điện thoại *
          div(class="col-sm-10")
            input(id="phone" class="form-control" type="text" name="phone" required placeholder="Nhập số điện thoại")

        div(class="form-group row mb-3 align-items-start")
          label(for="address" class="col-sm-2 col-form-label") Địa chỉ
          div(class="col-sm-10")
            input(id="address" class="form-control" type="text" name="address" placeholder="Nhập địa chỉ")

        div(class="form-group row mb-3 align-items-start")
          label(for="birthday" class="col-sm-2 col-form-label") Ngày sinh
          div(class="col-sm-10")
            input(id="birthday" class="form-control" type="date" name="birthday")

        // --- Ảnh đại diện ---
        .div.form-group.mb-4(upload-image)
          label(for="thumbnail") Ảnh đại diện

          // Nút chọn file kiểu custom
          .d-flex.align-items-center.gap-2
            label.btn.btn-success.d-flex.align-items-center.gap-2.m-0.px-3.py-2(for="thumbnail")
              i.bi.bi-upload
              span Chọn tệp

            // Input file ẩn
            input#thumbnail.d-none(
              type="file"
              name="thumbnail"
              accept="image/*"
              upload-image-input
              value=(account ? account.thumbnail : '')
            )

          // Preview ảnh
          if account && account.thumbnail
            img.image-preview.mt-2(
              src=account.thumbnail
              upload-image-preview
              style="width:120px; height:120px; border-radius:10px; border:1px solid #ddd; object-fit:cover;"
            )
          else
            img.image-preview.mt-2(
              src=""
              upload-image-preview
              style="width:120px; height:120px; border-radius:10px; border:1px solid #ddd; object-fit:cover;"
            )

        div(class="text-end mt-4")
          button(class="btn btn-primary" type="submit") Cập nhật
