extends ../../layouts/default.pug

block styles
  link(rel="stylesheet", href="/admin/css/dashboard.css")

block main
  .container-fluid
    h4.mb-4 Tổng quan

    .row.row-equal
      .col-md-6
        .dashboard-card(style="background: linear-gradient(135deg, #5E17EB, #8A2BE2); color: white;")
          .d-flex.justify-content-between.align-items-center.mb-3
            h5.mb-0 Đơn hàng
            .d-flex.gap-2
              select#orderTimeType.form-control.form-control-sm(style="width: 80px;")
                option(value="day") Ngày
                option(value="month" selected) Tháng
                option(value="year") Năm

              select#orderDaySelect.form-control.form-control-sm(style="width: 55px;")
                - for (let d = 1; d <= 31; d++)
                  option(value=d)= d

              select#orderMonthSelect.form-control.form-control-sm(style="width: 90px;")
                - for (let m = 1; m <= 12; m++)
                  option(value=m)= 'Tháng ' + m

              select#orderYearSelect.form-control.form-control-sm(style="width: 80px;")
                - for (let y = 2020; y <= 2025; y++)
                  option(value=y selected=(y === 2025))= y

          .row.text-center
            .col-6.mb-3.mt-2
              i.fas.fa-box.fa-2x.mb-2
              .card-title Tổng đơn hàng
              .card-value #{totalOrders} đơn hàng
            .col-6.mb-3.mt-2
              i.fas.fa-file-alt.fa-2x.mb-2
              .card-title Đơn hàng mới
              .card-value #{newOrders} đơn hàng
            .col-6.mt-4
              i.fas.fa-check-circle.fa-2x.mb-2
              .card-title Thành công
              .card-value #{successOrders} đơn hàng
            .col-6.mt-4
              i.fas.fa-times-circle.fa-2x.mb-2
              .card-title Đơn hủy
              .card-value #{cancelOrders} đơn hàng

      .col-md-6
        .chart-container
          .d-flex.justify-content-between.align-items-center.mb-3
            h6.mb-0 Đơn hàng
            .d-flex.gap-2
          canvas#orderChart(width="400" height="200")

    .row.mt-4
      .col-md-3
        .dashboard-card.stat-card.text-center
          i.fas.fa-cubes.fa-2x.text-primary.mb-2
          .card-title Tổng sản phẩm
          .card-value #{totalProducts} Sản phẩm

      .col-md-3
        .dashboard-card.stat-card.text-center
          i.fas.fa-folder.fa-2x.text-info.mb-2
          .card-title Danh mục sản phẩm
          .card-value #{totalCategories} Danh mục

      .col-md-3
        .dashboard-card.stat-card.text-center
          i.fas.fa-newspaper.fa-2x.text-warning.mb-2
          .card-title Tổng bài viết
          .card-value #{totalBlogs} Bài viết

      .col-md-3
        .dashboard-card.stat-card.text-center
          i.fas.fa-image.fa-2x.text-danger.mb-2
          .card-title Ảnh
          .card-value #{totalImages} Ảnh

    .row.mt-4
      .col-md-6
        .dashboard-card
          h6.section-title Khách hàng
          .row.text-center.customer-stat
            .col-4
              i.fas.fa-users
              .card-title Tổng khách hàng
              .card-value #{totalUsers} Khách hàng
            .col-4
              i.fas.fa-comments
              .card-title Tổng bình luận
              .card-value #{totalComments} Bình luận
            .col-4
              i.fas.fa-star
              .card-title Tổng đánh giá
              .card-value #{totalReviews} Đánh giá

      .col-md-6
        .chart-container
          .d-flex.justify-content-between.align-items-center.mb-3
            h6.section-title.mb-0 Thống kê khách hàng
            .d-flex.gap-2
              select#timeType.form-control.form-control-sm(style="width: 80px;")
                option(value="day") Ngày
                option(value="month" selected) Tháng
                option(value="year") Năm

              select#daySelect.form-control.form-control-sm(style="width: 50px;")
                - for (let d = 1; d <= 31; d++)
                  option(value=d)= d

              select#monthSelect.form-control.form-control-sm(style="width: 90px;")
                - for (let m = 1; m <= 12; m++)
                  option(value=m)= 'Tháng ' + m

              select#yearSelect.form-control.form-control-sm(style="width: 80px;")
                - for (let y = 2020; y <= 2025; y++)
                  option(value=y selected=(y === 2025))= y

          canvas#customerChart(width="400" height="200")

block scripts
  script.
    window.totalOrders = !{totalOrders};
    window.newOrders = !{newOrders};
    window.successOrders = !{successOrders};
    window.cancelOrders = !{cancelOrders};
    window.orderChartLabels = !{JSON.stringify(orderChartLabels)};
    window.orderChartData = !{JSON.stringify(orderChartData)};
    window.customerChartLabels = !{JSON.stringify(customerChartLabels)};
    window.customerChartData = !{JSON.stringify(customerChartData)};
  script(src="https://cdn.jsdelivr.net/npm/chart.js")
  script(src="/admin/js/dashboard.js")
