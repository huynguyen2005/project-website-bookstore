extends ../../layouts/default
include ../../mixins/alert.pug

block main
  +alert-success(5000)
  +alert-error(5000)

  div(class="card")
    div(class="card-header d-flex justify-content-between align-items-center")
      h5(class="mb-0") Chỉnh sửa thông tin cá nhân
      a(
        href=`${prefixAdmin}/my-account`
        class="btn btn-secondary btn-sm"
      )
        i(class="bi bi-arrow-left mr-1")
        | Quay lại

    div(class="card-body")
      form(
        action=`${prefixAdmin}/my-account/edit?_method=PATCH`
        method="POST"
        enctype="multipart/form-data"
      )

        // --- Ảnh đại diện ---
        div(class="form-group mb-4" upload-image)
            label(for="thumbnail") Ảnh đại diện
            div(class="d-flex align-items-center gap-2")
                input(
                    type="file"
                    class="form-control-file"
                    id="thumbnail"
                    name="thumbnail"
                    accept="image/*"
                    upload-image-input
                )
                span(
                    btn-close
                    style="cursor:pointer; font-weight:bold;"
                ) 
            img(
                src=user.thumbnail ? user.thumbnail : ""
                class="image-preview"
                upload-image-preview
            )
          

        // --- Họ và tên ---
        div(class="form-group")
          label(for="fullName") Họ và tên
          input#fullName.form-control(
            type="text"
            name="fullName"
            required
            placeholder="Nhập họ và tên"
            value=user.fullName
          )

        // --- Email ---
        div(class="form-group")
          label(for="email") Email
          input#email.form-control(
            type="email"
            name="email"
            required
            placeholder="Nhập email"
            value=user.email
          )

        // --- Số điện thoại ---
        div(class="form-group")
          label(for="phone") Số điện thoại
          input#phone.form-control(
            type="text"
            name="phone"
            placeholder="Nhập số điện thoại"
            value=user.phone
          )

        // --- Địa chỉ ---
        div(class="form-group")
          label(for="address") Địa chỉ
          input#address.form-control(
            type="text"
            name="address"
            placeholder="Nhập địa chỉ"
            value=user.address
          )

        // --- Ngày sinh ---
        div(class="form-group")
          label(for="birthday") Ngày sinh
          input#birthday.form-control(
            type="date"
            name="birthday"
            value=user.birthday ? user.birthday : ''
          )

        button.btn.btn-primary.mt-3(type="submit")
          i(class="bi bi-check-circle mr-1")
          | Cập nhật
