extends ../../layouts/default
include ../../mixins/alert

block main
  +alert-success(5000)
  div(data-role = roles)
  div(class="card")
    div(class="card-header d-flex justify-content-between align-items-center")
      h5(class="mb-0") Thiết lập phân quyền
      button(class="btn btn-primary" type="submit" form="form-permissions") Cập nhật

    div(class="card-body")
      table(class="table table-bordered align-middle text-center permission-table" permission-table)
        thead
          tr(class="bg-light fw-semibold text-dark align-middle")
            th(class="text-start" style="width: 30%")
            each role in roles 
              th(class="text-center") #{role.title}
          tr(data-name="id" class="d-none")
            th(class="text-start" style="width: 30%")
              each role in roles  
                  th
                    input(type="text" value=role.id)      
        tbody
          tr(checkbox-all)
            td(class="text-start") Chọn tất cả
            td(class="text-center")
              input(type="checkbox" class="form-check-input check-all")
            td(class="text-center")
              input(type="checkbox" class="form-check-input check-all")

          tr(class="table-secondary fw-semibold text-dark")
            td(class="text-start" colspan="3") Danh mục sách

          tr(data-name="book-category_view")
            td(class="text-start") Xem
            each role in roles
              td(class="text-center")
                input(type="checkbox" class="form-check-input")

          tr(data-name="book-category_create")
            td(class="text-start") Thêm mới
            each role in roles
              td(class="text-center")
                input(type="checkbox" class="form-check-input")

          tr(data-name="book-category_edit")
            td(class="text-start") Chỉnh sửa
            each role in roles
              td(class="text-center")
                input(type="checkbox" class="form-check-input")

          tr(data-name="book-category_delete")
            td(class="text-start text-danger fw-semibold") Xóa
            each role in roles
              td(class="text-center")
                input(type="checkbox" class="form-check-input")

    form(
        id="form-permissions"
        action=`${prefixAdmin}/roles/permissions?_method=PATCH`
        method="POST"
        form-permissions
    ) 
        input(type="text" name="permissions" input-permissions class="d-none")   
    script(src="/admin/js/role.js") 
