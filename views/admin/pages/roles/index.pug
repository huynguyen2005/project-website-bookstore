extends ../../layouts/default
include ../../mixins/search.pug

block main
  if(role.permissions.includes("roles_view"))
    div(class="card")
      div(class="card-header d-flex justify-content-between align-items-center")
        h5(class="mb-0") Nhóm quyền
        if(role.permissions.includes("roles_create"))
          a(href=`${prefixAdmin}/roles/create` class="btn btn-primary")
            i(class="bi bi-plus-lg mr-1")
            | Thêm mới

      div(class="card-body")
        +search(keyword, "roles")

        // Bảng danh sách
        table(class="table table-hover align-middle role-table")
          thead
            tr
              th
                input(type="checkbox" check-box-all)
              th Nhóm quyền
              th Mô tả ngắn
          tbody
            if records.length
              each record in records
                tr
                  td
                    input(type="checkbox" name="id" value=record.id)
                  td
                    strong #{record.title}
                    br
                    if(role.permissions.includes("roles_edit"))
                      a(href="javascript:;" data-id=record.id button-edit) Sửa 
                    if(role.permissions.includes("roles_delete")) 
                      |  
                      a(href="javascript:;" data-id=record.id button-delete) Xóa
                  td #{record.description}
            else
              tr
                td(colspan="3" class="text-center text-muted py-4")
                  | Không có dữ liệu nhóm quyền


        form(
          action=""
          method="POST"
          form-delete
          data-path=`${prefixAdmin}/roles/delete`
        )

        form(
          action=""
          method="GET"
          form-edit
          data-path=`${prefixAdmin}/roles/edit`
        )